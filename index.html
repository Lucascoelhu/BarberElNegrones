<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerador de Acessos | Admin Master</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <style>
        body { background: #0a0a0a; color: white; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .box { background: #141414; padding: 30px; border-radius: 20px; border: 1px solid #c5a059; text-align: center; width: 300px; }
        button { background: #c5a059; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .code { margin-top: 20px; padding: 15px; background: #000; color: #00ff88; font-family: monospace; border: 1px dashed #333; word-break: break-all; }
    </style>
</head>
<body>

<div class="box">
    <h2 style="color:#c5a059">Gerador Master</h2>
    <p style="font-size: 12px; color: #888;">Cria 30 dias de acesso no banco</p>
    <button onclick="gerarCodigo()">GERAR NOVO CÓDIGO</button>
    <div id="resultado" class="code">O código aparecerá aqui</div>
</div>

<script>
    // USE AS MESMAS CONFIGURAÇÕES DO SEU FIREBASE AQUI
    const firebaseConfig = { 
        apiKey: "AIzaSyC0x8q1N7R70BYhfd2daedBjRKH0qupJiI",
        authDomain: "elnes-720ce.firebaseapp.com",
        projectId: "elnes-720ce",
        storageBucket: "elnes-720ce.firebasestorage.app",
        messagingSenderId: "839018097076",
        appId: "1:839018097076:web:cc902e9081e3a35cac2ae1"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function gerarCodigo() {
        // Gera um código aleatório de 12 caracteres
        const novoCodigo = Math.random().toString(36).substring(2, 8).toUpperCase() + 
                           Math.random().toString(36).substring(2, 8).toUpperCase();
        
        try {
            await db.collection("codigos_ativacao").doc(novoCodigo).set({
                usado: false,
                dataCriacao: new Date(),
                dias: 30
            });
            document.getElementById('resultado').innerText = novoCodigo;
            alert("Código salvo no banco com sucesso!");
        } catch (e) {
            alert("Erro ao salvar no banco: " + e.message);
        }
    }
</script>
</body>
</html>
